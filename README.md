# CloudPhoto-HW2

Домашняя работа №2 по курсу Введение в облачные технологии.

Облачная функция для поиска лиц на фото.

## Настройка в YandexCloud
1. Сервисному аккаунту выставить роли в каталоге serverless.functions.invoker и editor.
2. Создать API-ключ и статический ключ доступа.
3. Создать облачную функцию.
4. Добавить файл с зависимостями requirements.txt в облачную функцию. Добавить библиотеки boto3, pillow, requests.
5. Создать триггер. Тип триггера - Object Storage. Выбрать бакет. Указать тип событий - "Создание объекта". Триггер будет вызывать созданную облачную функцию при создании новых объектов.
6. Создать стандартную очередь сообщений.
7. В облачной функции создать переменные окружения: aws_access_key_id, aws_secret_access_key, api_key, message_queue_url.

## Схема работы:
1. При создании в хранилище нового объекта (оригинальная фотография) триггер запускает облачную функцию.
2. Облачная функция используя сервис обнаружения лиц определяет есть ли на фотографии лица людей.
3. Если на фотографии лица присутствуют, то каждое обнаруженное лицо вырезается из основной фотографии в виде прямоугольника описывающего это лицо и сохраняется в облачном хранилище в альбом faces как новый объект (фотография лица).
4.Если были созданы объекты с фотографиями лиц, то функция отправляет в очередь сообщение в котором перечислены эти объекты.
